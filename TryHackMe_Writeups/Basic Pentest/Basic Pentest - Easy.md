# Basic Pentest - Easy

![image](https://www.notion.so/image/https%3A%2F%2Ftryhackme-images.s3.amazonaws.com%2Froom-icons%2F99c72676aab814b94e3bc350ba627b71.png?table=block&id=0dac3018-dc78-48b2-ac55-e87e69c0c86c&spaceId=03627ed2-4a57-4eb0-b83f-af1a1ea0ca02&width=250&userId=110be7c3-7784-4c61-b6ed-ae8c3145ed91&cache=v2)

Temas tocados:

- Linux Enumeration
- service enumeration
- hash cracking
- bruteforce

# Enumeracion

```bash
ping 10.10.81.135 -c 1
```

![image](BasicPentestMedia/image.png)

Empezamos tirando un ping para saber el estado de la maquina victima

```bash
nmap -p- --open --min-rate 5000 -vvv -n -Pn 10.10.81.135 -oG allPorts
```

![image](BasicPentestMedia/image%201.png)

hacemos una enumeracion con “**`NMAP`**” viendo asi los puertos abiertos:

- 22/TCP corriendo el servicio **`SSH`**
- 80/TCP corriendo el **`HTTP`**
- 139/TCP corriendo el **`netbios-ssn`**
- 445/TCP corriendo el **`SMB`**
- 8080/TCP **`HTTP`**

![image](BasicPentestMedia/image%202.png)

si nos metemos al puerto 8080 podemos ver que esta corriendo un `**tomcat/9.0.7`** y podemos ingresar mediante unas credenciales

![image](BasicPentestMedia/image%203.png)

con la herramienta **`dirbuster`** podemos buscar los directorios ocultos, no hay cosas de relevancia en el “j.txt” podemos encontrar un mensaje para jay que habla sobre credenciales “debiles”

![image](BasicPentestMedia/image%204.png)

Con NMAP enumeramos los “shares” y podemos ver cosas interesantes 

```jsx
smbclient //10.10.41.88/Anonymous
```

![image](BasicPentestMedia/image%205.png)

Encontramos un archivo de texto dentro de los shares

![image](BasicPentestMedia/image%206.png)

no es algo relevante, pero se puede observar que hay un usuario llamado jan y otro kay

```jsx
hydra -l jan -P ../content/passwords.txt 10.10.41.88 ssh -V -f
```

![image](BasicPentestMedia/image%207.png)

```jsx
[22][ssh] host: 10.10.41.88   login: jan   password: armando
```

Probamos hacer un bruteforce con la herramienta **`hydra`** al usuario de `Jan`, consiguiendo asi el acceso a su sesion mediante SSH

![image](BasicPentestMedia/image%208.png)

haciendo un reconocimiento sobre el sistema con el usuario jan podemos ver que dentro del directorio personal de kay hay una carpeta oculta que nos llama la atencion ( .ssh ), dentro de la misma se encontraba una clave id_rsa con la que podemos ganar acceso

# Explotación

![image](BasicPentestMedia/image%209.png)

pasamos la key rsa a hash para que john lo pueda leer

![image](BasicPentestMedia/image%2010.png)

desciframos la contraseña con john obteniendo asi su contraseña ( beeswax )

![image](BasicPentestMedia/image%2011.png)

nos conectamos mediante ssh ingresando la contraseña conseguida en el anterior item

# Root Flag

![image](BasicPentestMedia/image%2012.png)

encontramos la flag dentro del directorio personal de kay en el archivo llamdo “pass.bak”

# Conclusiones

El documento proporciona un detallado walkthrough de un pentest básico que comprende varias etapas críticas. Entre ellas se incluyen la enumeración de Linux, la enumeración de servicios, el cracking de hash y la fuerza bruta.

El primer paso involucró el uso de un simple ping para comprobar el estado de la máquina objetivo. Una vez confirmada su accesibilidad, se utilizó la herramienta NMAP para la enumeración de los puertos abiertos. Esta fase resultó esencial para entender los servicios que la máquina estaba ejecutando y su configuración.

En el proceso, se descubrieron varias credenciales débiles, lo cual resalta la importancia de utilizar contraseñas robustas para prevenir accesos no autorizados. Para ayudar en la tarea de descubrimiento de estas credenciales y de directorios ocultos, se utilizó la herramienta Dirbuster.

Posteriormente, se implementó un ataque de fuerza bruta utilizando la herramienta Hydra en el usuario Jan. Este ataque resultó exitoso, proporcionando acceso a la sesión SSH del usuario. Este paso reafirma la necesidad de implementar medidas de protección contra este tipo de ataques, como el uso de contraseñas complejas y la limitación de intentos de inicio de sesión fallidos.

Durante la exploración del sistema con los privilegios del usuario Jan, se descubrió una clave id_rsa en una carpeta oculta. Esta clave permitió un acceso aún mayor al sistema, subrayando la necesidad de proteger adecuadamente los datos sensibles y mantener actualizadas las políticas de seguridad.

Finalmente, se encontró la flag en un archivo llamado "pass.bak". El descubrimiento de la flag representa el logro final del pentest, indicando que se ha obtenido un acceso completo al sistema.

En resumen, este documento subraya la importancia de una sólida seguridad en todos los aspectos de un sistema y proporciona un valioso insight en las técnicas que pueden utilizar los atacantes para obtener acceso no autorizado.